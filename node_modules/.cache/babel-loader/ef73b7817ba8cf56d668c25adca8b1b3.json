{"ast":null,"code":"import _slicedToArray from \"/home/maga/Desktop/queen-api/burger-queen/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/maga/Desktop/queen-api/burger-queen/src/components/Products/index.js\";\nimport React, { useState, useEffect } from 'react';\nimport Header from '../Header';\nimport Clientname from './Cliente';\nimport Products from './Products';\nimport Pedido from './Pedido';\nimport MenuOpts from '../Options';\nimport postOrders from '../../controller/orders/orders';\nimport ctrl from '../../controller/products';\n\nconst Home = props => {\n  const _useState = useState(\"\"),\n        _useState2 = _slicedToArray(_useState, 2),\n        name = _useState2[0],\n        setName = _useState2[1];\n\n  const _useState3 = useState('Desayuno'),\n        _useState4 = _slicedToArray(_useState3, 2),\n        type = _useState4[0],\n        setType = _useState4[1];\n\n  const _useState5 = useState([]),\n        _useState6 = _slicedToArray(_useState5, 2),\n        prodData = _useState6[0],\n        setProdData = _useState6[1];\n\n  const _useState7 = useState([]),\n        _useState8 = _slicedToArray(_useState7, 2),\n        items = _useState8[0],\n        setItems = _useState8[1];\n\n  const _useState9 = useState(true),\n        _useState10 = _slicedToArray(_useState9, 2),\n        show = _useState10[0],\n        setShow = _useState10[1];\n\n  const updateName = e => {\n    setName(e.target.value);\n  };\n\n  const mapFunc = fn => id => {\n    setItems(fn(items, id));\n  };\n\n  const increase = mapFunc(ctrl.increase);\n  const decrease = mapFunc(ctrl.decrease);\n  const remove = mapFunc(ctrl.delete);\n\n  const userId = JSON.parse(localStorage.getItem('user'))._id;\n\n  const token = localStorage.getItem('token');\n  useEffect(() => {\n    fetch(\"http://165.22.166.131:4000/products\", {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      }\n    }).then(resp => resp.json()).then(data => {\n      // console.log(data)\n      setProdData(data);\n    });\n  }, []);\n  return React.createElement(React.Fragment, null, React.createElement(Header, {\n    logoutprop: props,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), React.createElement(\"main\", {\n    id: \"menu\",\n    className: \"container-fluid d-flex flex-wrap align-content-around\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(Clientname, {\n    name: name,\n    updateName: updateName,\n    show: show,\n    setShow: setShow,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), React.createElement(\"section\", {\n    className: \"row\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"col-md-6\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }, React.createElement(\"ul\", {\n    className: \"nav nav-tabs w-100\",\n    role: \"tablist\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(MenuOpts, {\n    click: () => setType('Desayuno'),\n    options: \"Desayuno\",\n    aClass: \"nav-link active\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }), React.createElement(MenuOpts, {\n    click: () => setType('Almuerzo'),\n    options: \"Almuerzo\",\n    aClass: \"nav-link\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    \"data-testid\": \"opt\",\n    className: \"card-columns\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, type === 'Desayuno' && React.createElement(Products, {\n    data: prodData,\n    brand: \"Es\",\n    add: increase,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }), type === 'Almuerzo' && React.createElement(Products, {\n    data: prodData,\n    menu: \"Almuerzo\",\n    add: increase,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }))), React.createElement(Pedido, {\n    items: ctrl.mix(prodData, items),\n    remove: remove,\n    decrease: decrease,\n    increase: increase,\n    postOrder: () => {\n      postOrders(name, items.map(el => ({\n        product: el._id,\n        qty: el.qty\n      })), token, userId).then(order => {\n        console.log(order);\n        setItems([]);\n        setName(\"\");\n        setShow(true);\n      }).catch(console.error);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }))));\n};\n\nexport default Home;","map":{"version":3,"sources":["/home/maga/Desktop/queen-api/burger-queen/src/components/Products/index.js"],"names":["React","useState","useEffect","Header","Clientname","Products","Pedido","MenuOpts","postOrders","ctrl","Home","props","name","setName","type","setType","prodData","setProdData","items","setItems","show","setShow","updateName","e","target","value","mapFunc","fn","id","increase","decrease","remove","delete","userId","JSON","parse","localStorage","getItem","_id","token","fetch","method","headers","then","resp","json","data","mix","map","el","product","qty","order","console","log","catch","error"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Header from '../Header';\nimport Clientname from './Cliente';\nimport Products from './Products';\nimport Pedido from './Pedido'\nimport MenuOpts from '../Options';\nimport postOrders from '../../controller/orders/orders'\nimport ctrl from '../../controller/products';\n\nconst Home = (props) => {\n  const [name, setName] = useState(\"\");\n  const [type, setType] = useState('Desayuno')\n  const [prodData, setProdData] = useState([]);\n  const [items, setItems] = useState([]);\n  const [show, setShow] = useState(true)\n\n  const updateName = (e) => {\n    setName(e.target.value)\n  }\n\n  const mapFunc = (fn) => (id) => {\n    setItems(fn(items, id))\n  }\n\n  const increase = mapFunc(ctrl.increase)\n  const decrease = mapFunc(ctrl.decrease)\n  const remove = mapFunc(ctrl.delete)\n  const userId = JSON.parse(localStorage.getItem('user'))._id;\n  const token = localStorage.getItem('token')\n\n  useEffect(() => {\n    fetch(`http://165.22.166.131:4000/products`, {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + localStorage.getItem('token')\n      },\n    }).then(resp => resp.json())\n      .then(data => {\n        // console.log(data)\n        setProdData(data)\n      })\n  }, [])\n\n  return (\n    <>\n      <Header logoutprop={props} />\n      <main id=\"menu\" className=\"container-fluid d-flex flex-wrap align-content-around\">\n        <Clientname name={name} updateName={updateName} show={show} setShow={setShow} />\n        <section className=\"row\">\n          <div className=\"col-md-6\">\n            <ul className=\"nav nav-tabs w-100\" role=\"tablist\">\n              <MenuOpts click={() => setType('Desayuno')} options=\"Desayuno\" aClass=\"nav-link active\" />\n              <MenuOpts click={() => setType('Almuerzo')} options=\"Almuerzo\" aClass=\"nav-link\" />\n            </ul>\n            <div data-testid='opt' className=\"card-columns\">\n              {type === 'Desayuno' && (\n                <Products  data={prodData} brand=\"Es\" add={increase} />\n              )}\n              {type === 'Almuerzo' && (\n                <Products  data={prodData} menu=\"Almuerzo\" add={increase} />\n              )}\n            </div>\n          </div>\n\n          <Pedido\n            items={ctrl.mix(prodData, items)}\n            remove={remove} decrease={decrease}\n            increase={increase}\n            postOrder={() => {\n              postOrders(name,\n                items.map(el => ({ product: el._id, qty: el.qty })),\n                token,\n                userId)\n                .then((order) => {\n                  console.log(order)\n                  setItems([]);\n                  setName(\"\");\n                  setShow(true)\n                })\n                .catch(console.error)\n            }} />\n        </section>\n\n      </main>\n    </>\n  )\n};\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}